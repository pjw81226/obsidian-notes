### 서버 `/thumbs` 처리 흐름
클라이언트가 `hash` 여러 개를 한 번에 보내는 API로 만들자:
### API
`GET /thumbs?hash=H1,H2,H3,H4,H5,H6`
### 서버 로직
1. `MGET th:H1 th:H2 ...` 로 한 번에 조회
2. 없는 hash들만 추림(missing)
3. missing 각각에 대해 `SET lk:th:H NX EX 60` 락 시도
    - 락 성공한 것만 **큐에 enqueue(OG 파싱 작업)**
    - 락 실패는 이미 누가 처리 중이라고 보고 스킵
4. 응답은 **현재 Redis에 있는 것만** + 나머지는 `PENDING` 상태로 반환
즉, **락 획득 = “작업 등록 권한”**, 실제 썸네일 생성은 워커가 함.

### 클라이언트 폴링은 “6번 따로”가 아니라 “1번 묶어서”
- 화면에 보이는 카드들의 `urlHash`를 모아서 **한 번에** `/thumbs` 호출
- 1초 간격으로 3~5회만 반복  
    → 매번 `MGET` 한 번이라 서버 부담 거의 없음
예)
- t=0s `/thumbs?hash=6개`
- t=1s 다시 6개(또는 아직 PENDING인 것만)
- t=2s …
- t=3s …
- t=4s …
```json
{
  "items": {
    "H1": {"status":"OK","thumbUrl":"https://..."},
    "H2": {"status":"PENDING"},
    "H3": {"status":"FAIL"},
    "H4": {"status":"OK","thumbUrl":"https://..."},
    "H5": {"status":"PENDING"},
    "H6": {"status":"OK","thumbUrl":"https://..."}
  }
}
```
### 워커(OG 파싱)가 해야 하는 일
- 큐에서 (hash, originallink) 받음
- OG 이미지 파싱
- 성공: `SETEX th:H 7d {...}`
- 실패: `SETEX th:H 2h {"status":"FAIL"}`  
    (FAIL도 캐싱해 재시도 폭주 방지)