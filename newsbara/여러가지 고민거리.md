
### samesite : strict? lax?

samesite는 CSRF 공격을 방지하기 위해 브라우저가 쿠키를 다른 사이트로 전송할지 여부를 결정하는 정책

| 특징             | Strict (엄격)                         | Lax (느슨함 - 기본값)                                    |
| -------------- | ----------------------------------- | -------------------------------------------------- |
| 쿠키 전송 기준       | 현재 도메인과 같을 때만 전송 (First-party only) | 현재 도메인과 같거나, 안전한 페이지 이동(Top-level Navigation) 시 전송 |
| 외부 링크 클릭       | 쿠키 전송 안 함 (로그인 풀림)                  | 쿠키 전송함 (로그인 유지)                                    |
| 이미지/iframe 로딩  | 전송 안 함                              | 전송 안 함                                             |
| POST 요청 (Form) | 전송 안 함                              | 전송 안 함                                             |
| 주요 용도          | 매우 높은 보안이 필요한 기능 (은행, 비번 변경 등)      | 일반적인 웹 서비스의 로그인 세션 (보안 + 사용자 편의)                   |

Strict 일 경우
1. 내가 A 사이트에 로그인을 해둔 상태
2. 네이버 메일에서 A 사이트 링크가 와서 클릭을 함.
3. A 사이트에는 **로그인이 안되어있는 것 처럼 보임**
	- 실제로 쿠키는 전송이 됐지만 최초의 요청에 대해서만 쿠키를 숨기는 것.
4. A 사이트에서 사이트 내의 다른 메뉴를 클릭하면 다시 로그인 되어있는 상태로 바뀜

외부에서 링크를 타고 내 사이트로 처음 들어오는 그 딱 한 번의 요청에 대해서만 브라우저가 쿠키를 막음

LAX 는 두가지 조건에서 쿠키를 보낸다.
1. **Top-Level Navigation (주소창이 바뀌는 이동) url이 완전히 변경되는 이동**
	- **허용(O):** 사용자가 링크(`<a>` 태그)를 클릭하거나, `window.location.href`로 페이지 전체가 이동하는 경우.
	- **차단(X):** `<iframe>`, `<img>` 태그, `XMLHTTPRequest(AJAX)`, `fetch()` 등을 통해 **현재 페이지 안에서** 몰래 요청을 보내는 경우.

2. **Safe HTTP Method**
	- **허용(O):** `GET`, `HEAD`, `OPTIONS` 등.
	- **차단(X):** `POST`, `PUT`, `DELETE` 등 (데이터를 수정/삭제하는 위험한 요청).



### 